<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×“×©×‘×•×¨×“ ×¤×™× × ×¡×™ ×—×›×</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f9fafb;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useMemo } = React;
        // Simple icon component using text symbols (no external dependencies)
        const Icon = ({ name, className = "h-4 w-4" }) => {
          const iconMap = {
            'filter': 'âš™',
            'dollar-sign': 'â‚ª',
            'receipt': 'ğŸ“„',
            'trending-up': 'ğŸ“ˆ',
            'check-circle': 'âœ“',
            'alert-circle': 'âš ',
            'search': 'ğŸ”',
            'upload': 'â†‘',
            'download': 'â†“',
            'plus': '+',
            'edit-2': 'âœ',
            'trash-2': 'ğŸ—‘',
            'save': 'ğŸ’¾',
            'x': 'âœ•',
            'database': 'ğŸ“Š'
          };
          
          const symbol = iconMap[name] || 'â€¢';
          
          return React.createElement('span', { 
            className: className,
            style: { 
              display: 'inline-flex',
              alignItems: 'center',
              justifyContent: 'center',
              fontSize: '0.875rem',
              fontFamily: 'system-ui, -apple-system, sans-serif'
            }
          }, symbol);
        };

        // Error Boundary Component
        class ErrorBoundary extends React.Component {
          constructor(props) {
            super(props);
            this.state = { hasError: false };
          }

          static getDerivedStateFromError(error) {
            return { hasError: true };
          }

          componentDidCatch(error, errorInfo) {
            console.warn('React Error Boundary caught error:', error, errorInfo);
          }

          render() {
            if (this.state.hasError) {
              return React.createElement('div', { 
                className: "p-4 text-center text-red-600" 
              }, 'Something went wrong. Please refresh the page.');
            }

            return this.props.children;
          }
        }

        const FinancialDashboard = () => {
          const [activeTab, setActiveTab] = useState('dashboard');
          
          // Always start with empty array - no automatic persistence
          const [projects, setProjects] = useState([]);

          const [selectedProject, setSelectedProject] = useState('all');
          const [isEditing, setIsEditing] = useState(null);
          const [newProject, setNewProject] = useState({
            orderDate: '',
            clientName: '',
            orderDetails: '',
            transactionAmount: '',
            vatPercent: 17,
            projectReceipts: '',
            projectNotes: ''
          });
          const [showAddForm, setShowAddForm] = useState(false);
          const [searchTerm, setSearchTerm] = useState('');
          const [isImporting, setIsImporting] = useState(false);
          const [importError, setImportError] = useState('');
          
          // File input ref for import
          const fileInputRef = React.useRef(null);

          // ×—×™×©×•×‘ KPI
          const dashboardData = useMemo(() => {
            const filteredProjects = selectedProject === 'all' 
              ? projects 
              : projects.filter(p => p.id === parseInt(selectedProject));

            const totalTransactionAmount = filteredProjects.reduce((sum, p) => sum + p.transactionAmount, 0);
            const totalVatAmount = filteredProjects.reduce((sum, p) => sum + (p.transactionAmount * p.vatPercent / 100), 0);
            const totalPayment = filteredProjects.reduce((sum, p) => sum + p.totalPayment, 0);
            const totalReceipts = filteredProjects.reduce((sum, p) => sum + p.projectReceipts, 0);
            const totalRemaining = filteredProjects.reduce((sum, p) => sum + p.remainingBalance, 0);

            const completionRate = totalPayment > 0 ? (totalReceipts / totalPayment) * 100 : 0;
            const completedProjects = filteredProjects.filter(p => p.remainingBalance === 0).length;
            const inProgressProjects = filteredProjects.filter(p => p.remainingBalance > 0).length;

            return {
              totalTransactionAmount,
              totalVatAmount,
              totalPayment,
              totalReceipts,
              totalRemaining,
              completionRate,
              completedProjects,
              inProgressProjects,
              totalProjects: filteredProjects.length
            };
          }, [projects, selectedProject]);

          const handleAddProject = () => {
            // Fix: Add validation and safe parsing
            const transactionAmount = parseFloat(newProject.transactionAmount) || 0;
            const vatPercent = parseFloat(newProject.vatPercent) || 17;
            const projectReceipts = parseFloat(newProject.projectReceipts) || 0;
            
            if (!newProject.clientName || !newProject.orderDetails || transactionAmount <= 0) {
              alert('×× × ××œ× ××ª ×›×œ ×”×©×“×•×ª ×”× ×“×¨×©×™×');
              return;
            }

            const totalPayment = transactionAmount * (1 + vatPercent / 100);
            const remainingBalance = totalPayment - projectReceipts;

            const project = {
              id: Date.now(),
              ...newProject,
              transactionAmount,
              vatPercent,
              totalPayment,
              projectReceipts,
              remainingBalance
            };

            setProjects([...projects, project]);
            setNewProject({
              orderDate: '',
              clientName: '',
              orderDetails: '',
              transactionAmount: '',
              vatPercent: 17,
              projectReceipts: '',
              projectNotes: ''
            });
            setShowAddForm(false);
          };

          const handleEditProject = (id, updatedProject) => {
            // Fix: Add safe parsing
            const transactionAmount = parseFloat(updatedProject.transactionAmount) || 0;
            const vatPercent = parseFloat(updatedProject.vatPercent) || 17;
            const projectReceipts = parseFloat(updatedProject.projectReceipts) || 0;
            
            const totalPayment = transactionAmount * (1 + vatPercent / 100);
            const remainingBalance = totalPayment - projectReceipts;

            setProjects(projects.map(p => 
              p.id === id 
                ? { ...updatedProject, id, transactionAmount, vatPercent, projectReceipts, totalPayment, remainingBalance }
                : p
            ));
            setIsEditing(null);
          };

          const handleDeleteProject = (id) => {
            setProjects(projects.filter(p => p.id !== id));
          };
          
          // Import projects from JSON file
          const handleImportProjects = (event) => {
            const file = event.target.files[0];
            if (!file) return;
            
            setIsImporting(true);
            setImportError('');
            
            const reader = new FileReader();
            reader.onload = (e) => {
              try {
                const importedData = JSON.parse(e.target.result);
                
                // Validate imported data
                if (!Array.isArray(importedData)) {
                  throw new Error('×”×§×•×‘×¥ ×—×™×™×‘ ×œ×”×›×™×œ ××¢×¨×š ×©×œ ×¤×¨×•×™×§×˜×™×');
                }
                
                // Validate each project has required fields
                const validatedProjects = importedData.map((project, index) => {
                  if (!project.clientName || !project.orderDetails || typeof project.transactionAmount !== 'number') {
                    throw new Error(`×¤×¨×•×™×§×˜ ××¡×¤×¨ ${index + 1} ×—×¡×¨ ×©×“×•×ª ×—×•×‘×”`);
                  }
                  
                  // Ensure all numeric fields are properly calculated
                  const transactionAmount = parseFloat(project.transactionAmount) || 0;
                  const vatPercent = parseFloat(project.vatPercent) || 17;
                  const projectReceipts = parseFloat(project.projectReceipts) || 0;
                  const totalPayment = transactionAmount * (1 + vatPercent / 100);
                  const remainingBalance = totalPayment - projectReceipts;
                  
                  return {
                    id: project.id || Date.now() + Math.random(),
                    orderDate: project.orderDate || new Date().toISOString().split('T')[0],
                    clientName: project.clientName,
                    orderDetails: project.orderDetails,
                    transactionAmount,
                    vatPercent,
                    totalPayment,
                    projectReceipts,
                    remainingBalance,
                    projectNotes: project.projectNotes || ''
                  };
                });
                
                setProjects(validatedProjects);
                alert(`×”×•×¢×œ×• ×‘×”×¦×œ×—×” ${validatedProjects.length} ×¤×¨×•×™×§×˜×™×`);
                
              } catch (error) {
                setImportError(error.message);
                alert('×©×’×™××” ×‘×™×‘×•× ×”×§×•×‘×¥: ' + error.message);
              } finally {
                setIsImporting(false);
                if (fileInputRef.current) {
                  fileInputRef.current.value = '';
                }
              }
            };
            
            reader.readAsText(file);
          };
          
          // Export projects to JSON file
          const handleExportProjects = () => {
            if (projects.length === 0) {
              alert('××™×Ÿ ×¤×¨×•×™×§×˜×™× ×œ×™×™×¦×•×');
              return;
            }
            
            const dataStr = JSON.stringify(projects, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `financial-dashboard-projects-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            URL.revokeObjectURL(url);
          };
          
          // Clear all projects (start fresh)
          const handleClearDatabase = () => {
            if (projects.length === 0) {
              alert('×”××¡×“ × ×ª×•× ×™× ×›×‘×¨ ×¨×™×§');
              return;
            }
            
            if (confirm('×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ××ª ×›×œ ×”×¤×¨×•×™×§×˜×™×? ×¤×¢×•×œ×” ×–×• ××™× ×” × ×™×ª× ×ª ×œ×‘×™×˜×•×œ.')) {
              setProjects([]);
              alert('××¡×“ ×”× ×ª×•× ×™× × ××—×§ ×‘×”×¦×œ×—×”');
            }
          };

          const filteredProjectsForTable = projects.filter(project =>
            project.clientName.toLowerCase().includes(searchTerm.toLowerCase()) ||
            project.orderDetails.toLowerCase().includes(searchTerm.toLowerCase())
          );

          const formatCurrency = (amount) => {
            return new Intl.NumberFormat('he-IL', {
              style: 'currency',
              currency: 'ILS',
              currencyDisplay: 'symbol'
            }).format(amount).replace('IL', '');
          };

          const KPICard = ({ title, value, iconName, color, subtitle }) => (
            React.createElement('div', {
              className: "bg-white rounded-lg shadow-lg p-6 border-r-4",
              style: { borderColor: color }
            },
              React.createElement('div', { className: "flex items-center justify-between" },
                React.createElement('div', null,
                  React.createElement('p', { className: "text-gray-600 text-sm font-medium" }, title),
                  React.createElement('p', { className: "text-2xl font-bold text-gray-900" }, value),
                  subtitle && React.createElement('p', { className: "text-sm text-gray-500 mt-1" }, subtitle)
                ),
                React.createElement(Icon, { name: iconName, className: "h-8 w-8", style: { color } })
              )
            )
          );

          const ProjectRow = ({ project, isEditing, onEdit, onSave, onCancel, onDelete, formatCurrency }) => {
            const [editData, setEditData] = useState(project);

            const handleSave = () => {
              onSave(editData);
            };

            if (isEditing) {
              return React.createElement('tr', { className: "bg-yellow-50" },
                React.createElement('td', { className: "px-6 py-4" },
                  React.createElement('input', {
                    type: "date",
                    value: editData.orderDate,
                    onChange: (e) => setEditData({...editData, orderDate: e.target.value}),
                    className: "w-full border border-gray-300 rounded px-2 py-1"
                  })
                ),
                React.createElement('td', { className: "px-6 py-4" },
                  React.createElement('input', {
                    type: "text",
                    value: editData.clientName,
                    onChange: (e) => setEditData({...editData, clientName: e.target.value}),
                    className: "w-full border border-gray-300 rounded px-2 py-1 text-right"
                  })
                ),
                React.createElement('td', { className: "px-6 py-4" },
                  React.createElement('input', {
                    type: "text",
                    value: editData.orderDetails,
                    onChange: (e) => setEditData({...editData, orderDetails: e.target.value}),
                    className: "w-full border border-gray-300 rounded px-2 py-1 text-right"
                  })
                ),
                React.createElement('td', { className: "px-6 py-4" },
                  React.createElement('input', {
                    type: "number",
                    value: editData.transactionAmount,
                    onChange: (e) => setEditData({...editData, transactionAmount: e.target.value}),
                    className: "w-full border border-gray-300 rounded px-2 py-1"
                  })
                ),
                React.createElement('td', { className: "px-6 py-4" },
                  React.createElement('input', {
                    type: "number",
                    value: editData.vatPercent,
                    onChange: (e) => setEditData({...editData, vatPercent: e.target.value}),
                    className: "w-full border border-gray-300 rounded px-2 py-1"
                  })
                ),
                React.createElement('td', { className: "px-6 py-4 text-sm text-gray-900" },
                  formatCurrency((parseFloat(editData.transactionAmount) || 0) * (1 + (parseFloat(editData.vatPercent) || 17) / 100))
                ),
                React.createElement('td', { className: "px-6 py-4" },
                  React.createElement('input', {
                    type: "number",
                    value: editData.projectReceipts,
                    onChange: (e) => setEditData({...editData, projectReceipts: e.target.value}),
                    className: "w-full border border-gray-300 rounded px-2 py-1"
                  })
                ),
                React.createElement('td', { className: "px-6 py-4 text-sm text-gray-900" },
                  formatCurrency(((parseFloat(editData.transactionAmount) || 0) * (1 + (parseFloat(editData.vatPercent) || 17) / 100)) - (parseFloat(editData.projectReceipts) || 0))
                ),
                React.createElement('td', { className: "px-6 py-4" },
                  React.createElement('input', {
                    type: "text",
                    value: editData.projectNotes,
                    onChange: (e) => setEditData({...editData, projectNotes: e.target.value}),
                    className: "w-full border border-gray-300 rounded px-2 py-1 text-right"
                  })
                ),
                React.createElement('td', { className: "px-6 py-4" },
                  React.createElement('div', { className: "flex space-x-reverse space-x-2" },
                    React.createElement('button', {
                      onClick: handleSave,
                      className: "text-green-600 hover:text-green-900"
                    }, React.createElement(Icon, { name: "save", className: "h-4 w-4" })),
                    React.createElement('button', {
                      onClick: onCancel,
                      className: "text-gray-600 hover:text-gray-900"
                    }, React.createElement(Icon, { name: "x", className: "h-4 w-4" }))
                  )
                )
              );
            }

            return React.createElement('tr', { className: "hover:bg-gray-50" },
              React.createElement('td', { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-900" }, project.orderDate),
              React.createElement('td', { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right" }, project.clientName),
              React.createElement('td', { className: "px-6 py-4 text-sm text-gray-900 text-right max-w-xs truncate" }, project.orderDetails),
              React.createElement('td', { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-900" }, formatCurrency(project.transactionAmount)),
              React.createElement('td', { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-900" }, project.vatPercent + '%'),
              React.createElement('td', { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium" }, formatCurrency(project.totalPayment)),
              React.createElement('td', { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-900" }, formatCurrency(project.projectReceipts)),
              React.createElement('td', { 
                className: `px-6 py-4 whitespace-nowrap text-sm font-medium ${project.remainingBalance === 0 ? 'text-green-600' : 'text-red-600'}`
              }, formatCurrency(project.remainingBalance)),
              React.createElement('td', { className: "px-6 py-4 text-sm text-gray-900 text-right max-w-xs truncate" }, project.projectNotes),
              React.createElement('td', { className: "px-6 py-4 whitespace-nowrap" },
                React.createElement('div', { className: "flex space-x-reverse space-x-2" },
                  React.createElement('button', {
                    onClick: onEdit,
                    className: "text-blue-600 hover:text-blue-900"
                  }, React.createElement(Icon, { name: "edit-2", className: "h-4 w-4" })),
                  React.createElement('button', {
                    onClick: onDelete,
                    className: "text-red-600 hover:text-red-900"
                  }, React.createElement(Icon, { name: "trash-2", className: "h-4 w-4" }))
                )
              )
            );
          };

          return React.createElement('div', { className: "min-h-screen bg-gray-50", dir: "rtl" },
            // Header
            React.createElement('div', { className: "bg-white shadow-sm border-b" },
              React.createElement('div', { className: "max-w-7xl mx-auto px-4" },
                React.createElement('div', { className: "flex justify-between items-center py-4" },
                  React.createElement('h1', { className: "text-2xl font-bold text-gray-900" }, '×“×©×‘×•×¨×“ ×¤×™× × ×¡×™ ×—×›×'),
                  React.createElement('div', { className: "flex space-x-reverse space-x-4" },
                    React.createElement('button', {
                      onClick: () => setActiveTab('dashboard'),
                      className: `px-4 py-2 rounded-lg font-medium ${
                        activeTab === 'dashboard' 
                          ? 'bg-blue-600 text-white' 
                          : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                      }`
                    }, '×“×©×‘×•×¨×“'),
                    React.createElement('button', {
                      onClick: () => setActiveTab('database'),
                      className: `px-4 py-2 rounded-lg font-medium ${
                        activeTab === 'database' 
                          ? 'bg-blue-600 text-white' 
                          : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                      }`
                    }, '××¡×“ × ×ª×•× ×™×')
                  )
                )
              )
            ),

            React.createElement('div', { className: "max-w-7xl mx-auto px-4 py-6" },
              activeTab === 'dashboard' && React.createElement('div', { className: "space-y-6" },
                // Project Filter
                React.createElement('div', { className: "bg-white rounded-lg shadow p-4" },
                  React.createElement('div', { className: "flex items-center space-x-reverse space-x-4" },
                    React.createElement(Icon, { name: "filter", className: "h-5 w-5 text-gray-500" }),
                    React.createElement('label', { className: "text-sm font-medium text-gray-700" }, '×¡×™× ×•×Ÿ ×œ×¤×™ ×¤×¨×•×™×§×˜:'),
                    React.createElement('select', {
                      value: selectedProject,
                      onChange: (e) => setSelectedProject(e.target.value),
                      className: "border border-gray-300 rounded-md px-3 py-2 bg-white text-right"
                    },
                      React.createElement('option', { value: "all" }, '×›×œ ×”×¤×¨×•×™×§×˜×™×'),
                      projects.map(project => 
                        React.createElement('option', { key: project.id, value: project.id },
                          project.clientName + ' - ' + project.orderDetails.substring(0, 30) + '...'
                        )
                      )
                    )
                  )
                ),

                // KPI Cards
                React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" },
                  React.createElement(KPICard, {
                    title: "×¡×›×•× ×¢×¡×§××•×ª",
                    value: formatCurrency(dashboardData.totalTransactionAmount),
                    iconName: "dollar-sign",
                    color: "#3B82F6"
                  }),
                  React.createElement(KPICard, {
                    title: "×¡×›×•× ××¢×´×",
                    value: formatCurrency(dashboardData.totalVatAmount),
                    iconName: "receipt",
                    color: "#10B981"
                  }),
                  React.createElement(KPICard, {
                    title: "×¡×”×´×› ×œ×ª×©×œ×•×",
                    value: formatCurrency(dashboardData.totalPayment),
                    iconName: "trending-up",
                    color: "#8B5CF6"
                  }),
                  React.createElement(KPICard, {
                    title: "×ª×§×‘×•×œ×™× ×œ×¤×¨×•×™×§×˜",
                    value: formatCurrency(dashboardData.totalReceipts),
                    iconName: "check-circle",
                    color: "#06B6D4"
                  }),
                  React.createElement(KPICard, {
                    title: "×™×ª×¨×” ×œ×ª×©×œ×•×",
                    value: formatCurrency(dashboardData.totalRemaining),
                    iconName: "alert-circle",
                    color: "#EF4444"
                  }),
                  React.createElement(KPICard, {
                    title: "××—×•×– ×”×©×œ××”",
                    value: `${dashboardData.completionRate.toFixed(1)}%`,
                    iconName: "trending-up",
                    color: "#F59E0B",
                    subtitle: `${dashboardData.completedProjects} ××ª×•×š ${dashboardData.totalProjects} ×¤×¨×•×™×§×˜×™×`
                  })
                ),

                // Project Status Overview
                React.createElement('div', { className: "bg-white rounded-lg shadow p-6" },
                  React.createElement('h3', { className: "text-lg font-semibold text-gray-900 mb-4" }, '×¡×˜×˜×•×¡ ×¤×¨×•×™×§×˜×™×'),
                  React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-3 gap-4" },
                    React.createElement('div', { className: "text-center p-4 bg-green-50 rounded-lg" },
                      React.createElement('div', { className: "text-2xl font-bold text-green-600" }, dashboardData.completedProjects),
                      React.createElement('div', { className: "text-sm text-green-800" }, '×¤×¨×•×™×§×˜×™× ×©×”×•×©×œ××•')
                    ),
                    React.createElement('div', { className: "text-center p-4 bg-yellow-50 rounded-lg" },
                      React.createElement('div', { className: "text-2xl font-bold text-yellow-600" }, dashboardData.inProgressProjects),
                      React.createElement('div', { className: "text-sm text-yellow-800" }, '×¤×¨×•×™×§×˜×™× ×‘×ª×”×œ×™×š')
                    ),
                    React.createElement('div', { className: "text-center p-4 bg-blue-50 rounded-lg" },
                      React.createElement('div', { className: "text-2xl font-bold text-blue-600" }, dashboardData.totalProjects),
                      React.createElement('div', { className: "text-sm text-blue-800" }, '×¡×”×´×› ×¤×¨×•×™×§×˜×™×')
                    )
                  )
                )
              ),

              activeTab === 'database' && React.createElement('div', { className: "space-y-6" },
                // Search, Import, Export, and Add
                React.createElement('div', { className: "bg-white rounded-lg shadow p-4" },
                  React.createElement('div', { className: "flex justify-between items-center mb-4" },
                    React.createElement('div', { className: "flex items-center space-x-reverse space-x-4" },
                      React.createElement(Icon, { name: "search", className: "h-5 w-5 text-gray-500" }),
                      React.createElement('input', {
                        type: "text",
                        placeholder: "×—×™×¤×•×© ×œ×¤×™ ×©× ×œ×§×•×— ××• ×¤×™×¨×•×˜ ×”×–×× ×”...",
                        value: searchTerm,
                        onChange: (e) => setSearchTerm(e.target.value),
                        className: "border border-gray-300 rounded-md px-3 py-2 w-80 text-right"
                      })
                    ),
                    React.createElement('div', { className: "flex items-center space-x-reverse space-x-2" },
                      // Import button
                      React.createElement('button', {
                        onClick: () => fileInputRef.current.click(),
                        disabled: isImporting,
                        className: "bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-reverse space-x-2 disabled:opacity-50"
                      },
                        React.createElement(Icon, { name: "upload", className: "h-4 w-4" }),
                        React.createElement('span', null, isImporting ? '××™×™×‘×...' : '×™×‘×•× ××§×•×‘×¥')
                      ),
                      // Export button
                      React.createElement('button', {
                        onClick: handleExportProjects,
                        disabled: projects.length === 0,
                        className: "bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center space-x-reverse space-x-2 disabled:opacity-50"
                      },
                        React.createElement(Icon, { name: "download", className: "h-4 w-4" }),
                        React.createElement('span', null, '×™×™×¦×•× ×œ×§×•×‘×¥')
                      ),
                      // Clear database button
                      React.createElement('button', {
                        onClick: handleClearDatabase,
                        disabled: projects.length === 0,
                        className: "bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 flex items-center space-x-reverse space-x-2 disabled:opacity-50"
                      },
                        React.createElement(Icon, { name: "trash-2", className: "h-4 w-4" }),
                        React.createElement('span', null, '××—×§ ×”×›×œ')
                      ),
                      // Add project button
                      React.createElement('button', {
                        onClick: () => setShowAddForm(true),
                        className: "bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-reverse space-x-2"
                      },
                        React.createElement(Icon, { name: "plus", className: "h-4 w-4" }),
                        React.createElement('span', null, '×”×•×¡×£ ×¤×¨×•×™×§×˜')
                      )
                    )
                  ),
                  // Hidden file input for import
                  React.createElement('input', {
                    type: "file",
                    ref: fileInputRef,
                    accept: ".json",
                    onChange: handleImportProjects,
                    style: { display: 'none' }
                  })
                ),

                // Add Project Form
                showAddForm && React.createElement('div', { className: "bg-white rounded-lg shadow p-6" },
                  React.createElement('h3', { className: "text-lg font-semibold text-gray-900 mb-4" }, '×”×•×¡×£ ×¤×¨×•×™×§×˜ ×—×“×©'),
                  React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" },
                    React.createElement('input', {
                      type: "date",
                      placeholder: "×ª××¨×™×š ×”×–×× ×”",
                      value: newProject.orderDate,
                      onChange: (e) => setNewProject({...newProject, orderDate: e.target.value}),
                      className: "border border-gray-300 rounded-md px-3 py-2"
                    }),
                    React.createElement('input', {
                      type: "text",
                      placeholder: "×©× ×œ×§×•×—",
                      value: newProject.clientName,
                      onChange: (e) => setNewProject({...newProject, clientName: e.target.value}),
                      className: "border border-gray-300 rounded-md px-3 py-2 text-right"
                    }),
                    React.createElement('input', {
                      type: "text",
                      placeholder: "×¤×™×¨×•×˜ ×”×–×× ×”",
                      value: newProject.orderDetails,
                      onChange: (e) => setNewProject({...newProject, orderDetails: e.target.value}),
                      className: "border border-gray-300 rounded-md px-3 py-2 text-right"
                    }),
                    React.createElement('input', {
                      type: "number",
                      placeholder: "×¡×›×•× ×¢×¡×§×”",
                      value: newProject.transactionAmount,
                      onChange: (e) => setNewProject({...newProject, transactionAmount: e.target.value}),
                      className: "border border-gray-300 rounded-md px-3 py-2"
                    }),
                    React.createElement('input', {
                      type: "number",
                      placeholder: "××¢×´× (%)",
                      value: newProject.vatPercent,
                      onChange: (e) => setNewProject({...newProject, vatPercent: e.target.value}),
                      className: "border border-gray-300 rounded-md px-3 py-2"
                    }),
                    React.createElement('input', {
                      type: "number",
                      placeholder: "×ª×§×‘×•×œ×™× ×œ×¤×¨×•×™×§×˜",
                      value: newProject.projectReceipts,
                      onChange: (e) => setNewProject({...newProject, projectReceipts: e.target.value}),
                      className: "border border-gray-300 rounded-md px-3 py-2"
                    }),
                    React.createElement('input', {
                      type: "text",
                      placeholder: "×”×¢×¨×•×ª ×œ×¤×¨×•×™×§×˜",
                      value: newProject.projectNotes,
                      onChange: (e) => setNewProject({...newProject, projectNotes: e.target.value}),
                      className: "border border-gray-300 rounded-md px-3 py-2 text-right md:col-span-2"
                    })
                  ),
                  React.createElement('div', { className: "flex justify-end space-x-reverse space-x-4 mt-4" },
                    React.createElement('button', {
                      onClick: () => setShowAddForm(false),
                      className: "px-4 py-2 text-gray-600 hover:text-gray-800"
                    }, '×‘×™×˜×•×œ'),
                    React.createElement('button', {
                      onClick: handleAddProject,
                      className: "bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"
                    }, '×©××•×¨')
                  )
                ),

                // Empty state or Projects Table
                projects.length === 0 ? 
                  React.createElement('div', { className: "bg-white rounded-lg shadow p-12 text-center" },
                    React.createElement(Icon, { name: "database", className: "h-16 w-16 text-gray-400 mx-auto mb-4" }),
                    React.createElement('h3', { className: "text-lg font-semibold text-gray-900 mb-2" }, '××¡×“ × ×ª×•× ×™× ×¨×™×§'),
                    React.createElement('p', { className: "text-gray-600 mb-6" }, '×™×‘× ××ª ××¡×“ ×”× ×ª×•× ×™× ×©×œ×š ××§×•×‘×¥ JSON ××• ×”×ª×—×œ ×œ×™×¦×•×¨ ×¤×¨×•×™×§×˜×™× ×—×“×©×™×'),
                    React.createElement('div', { className: "flex justify-center space-x-reverse space-x-4" },
                      React.createElement('button', {
                        onClick: () => fileInputRef.current.click(),
                        className: "bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 flex items-center space-x-reverse space-x-2"
                      },
                        React.createElement(Icon, { name: "upload", className: "h-5 w-5" }),
                        React.createElement('span', null, '×™×‘×•× ××¡×“ × ×ª×•× ×™×')
                      ),
                      React.createElement('button', {
                        onClick: () => setShowAddForm(true),
                        className: "bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 flex items-center space-x-reverse space-x-2"
                      },
                        React.createElement(Icon, { name: "plus", className: "h-5 w-5" }),
                        React.createElement('span', null, '×¦×•×¨ ×¤×¨×•×™×§×˜ ×—×“×©')
                      )
                    )
                  ) :
                  // Projects Table
                  React.createElement('div', { className: "bg-white rounded-lg shadow overflow-hidden" },
                  React.createElement('div', { className: "overflow-x-auto" },
                    React.createElement('table', { className: "min-w-full divide-y divide-gray-200" },
                      React.createElement('thead', { className: "bg-gray-50" },
                        React.createElement('tr', null,
                          React.createElement('th', { className: "px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider" }, '×ª××¨×™×š ×”×–×× ×”'),
                          React.createElement('th', { className: "px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider" }, '×©× ×œ×§×•×—'),
                          React.createElement('th', { className: "px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider" }, '×¤×™×¨×•×˜ ×”×–×× ×”'),
                          React.createElement('th', { className: "px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider" }, '×¡×›×•× ×¢×¡×§×”'),
                          React.createElement('th', { className: "px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider" }, '××¢×´× (%)'),
                          React.createElement('th', { className: "px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider" }, '×¡×”×´×› ×œ×ª×©×œ×•×'),
                          React.createElement('th', { className: "px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider" }, '×ª×§×‘×•×œ×™×'),
                          React.createElement('th', { className: "px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider" }, '×™×ª×¨×”'),
                          React.createElement('th', { className: "px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider" }, '×”×¢×¨×•×ª'),
                          React.createElement('th', { className: "px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider" }, '×¤×¢×•×œ×•×ª')
                        )
                      ),
                      React.createElement('tbody', { className: "bg-white divide-y divide-gray-200" },
                        filteredProjectsForTable.map((project) => 
                          React.createElement(ProjectRow, {
                            key: project.id,
                            project: project,
                            isEditing: isEditing === project.id,
                            onEdit: () => setIsEditing(project.id),
                            onSave: (updatedProject) => handleEditProject(project.id, updatedProject),
                            onCancel: () => setIsEditing(null),
                            onDelete: () => handleDeleteProject(project.id),
                            formatCurrency: formatCurrency
                          })
                        )
                      )
                    )
                  )
                )
              )
            )
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(ErrorBoundary, null, React.createElement(FinancialDashboard)));
    </script>
</body>
</html>